## ìš°ì•„í•œ í…Œí¬ëŸ¬ë‹ React&Typescript 5íšŒì°¨

2020ë…„ 09ì›” 15ì¼ í™”ìš”ì¼

<details><summary>ğŸ“– Table of Contents</summary>

- [Middleware ë€?](#Middleware-ë€?)

- [ëª½í‚¤ íŒ¨ì¹­](#ëª½í‚¤-íŒ¨ì¹­)

- [Curring](#Curring)

- [Reference Link](#Reference-Link)

</details>

## ì˜¤ëŠ˜ì˜ ì£¼ì œ

- `Middleware` ì˜ ê°œë…ì„ ìµíˆê³  `Redux (Vanilla JS)` ì— ì ìš©í•´ë³´ì

- `Middleware` ì˜ ì›ë¦¬ ì´í•´ë¥¼ í†µí•´ **ì§€ì—°í˜¸ì¶œ** ì„ ì´í•´í•´ë³´ì

## Middleware ë€?

ì´ì „ ì‹œê°„ì— ì „ì—­ ìƒíƒœ ê´€ë¦¬ ë°©ë²•ìœ¼ë¡œ `Redux` ë¼ëŠ” íˆ´ì„ ë°°ì› ë‹¤. í•˜ì§€ë§Œ, ì‚¬ìš© ì‹œ `Redux` ëŠ” ìˆ˜ì • ë¶ˆê°€ëŠ¥í•œ data ì²˜ë¦¬ê¸° (ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬) ë¡œ ì˜ˆì™¸ì ì¸ ìƒí™©ì„ ë‹¤ ì²˜ë¦¬í•  ìˆ˜ ì—†ë‹¤.  
**ì´ëŸ´ ë•Œ ì›í•˜ëŠ” ë™ì‘ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `Plugin` ë˜ëŠ” `Middleware` ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.**

ì´ë¥¼ `Redux` ì˜ ë¡œì§ìœ¼ë¡œ ë¹„ìœ í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

- íë¥´ëŠ” data : `action`
- ê³ ì •ëœ ì²˜ë¦¬ê¸° : `reducer` / `redux`

---

ìˆœìˆ˜ `Redux` ëŠ” ëª¨ë‘ ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ì½”ë“œì´ë‹¤.
ì´ëŸ° `Redux` ë‚´ì—ì„œ `reducer` ëŠ” **ì™¸ë¶€ dependency** ê°€ ì—†ëŠ” **ìˆœìˆ˜í•¨ìˆ˜**ì´ì–´ì•¼ë§Œ í•œë‹¤.
(ê·¸ë˜ì•¼, ì¼ê´€ì ì¸ ê²°ê³¼ë¥¼ return í•˜ê³  side-effect ë¥¼ ì—†ì•¨ ìˆ˜ ìˆë‹¤.)

**í•˜ì§€ë§Œ, ìƒíƒœê´€ë¦¬ ë¡œì§ì—ì„œ ìˆœìˆ˜í•˜ì§€ ì•Šì€ ìƒí™©ì„ ë‹¤ë¤„ì•¼í•  ë•Œê°€ ìˆë‹¤.**  
=> ë¬¸ì œ: **API** (ë¹„ë™ê¸°ì ì´ê³  ì–´ë–¤ ì˜ˆì™¸ê°€ ë°œìƒí• ì§€ ì•Œ ìˆ˜ ì—†ë‹¤.)  
=> í•´ê²°ì±…: **ë¯¸ë“¤ì›¨ì–´** (`reducer` ì™¸ë¶€ì—ì„œ ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê³µê°„) ë¥¼ ì‚¬ìš©

`Middleware` ëŠ” `Plugin` ê³¼ ë‹¤ë¥´ê²Œ íë¥´ëŠ” ëª¨ë“  data ê°€ ì¶”ê°€ëœ ëª¨ë“  `Middleware` ì— ë°˜ë“œì‹œ in & out í•œë‹¤.

**`Middleware` ëŠ” pipeline ì— ê½‚íŒ ìˆœì„œëŒ€ë¡œ íë¥¸ë‹¤.** ì¦‰, ìˆœì„œì— dependency ê°€ ìˆëŠ” (ì²˜ë¦¬ ìˆœì„œê°€ ì¤‘ìš”í•œ) `Middleware` ëŠ” ì£¼ì˜ë¥¼ í•´ì•¼í•œë‹¤.

## ëª½í‚¤ íŒ¨ì¹­

ì‹¤í–‰ ì¤‘ì¸ í•¨ìˆ˜ì˜ ìƒíƒœë¥¼ run time ì—ì„œ ë³€ê²½í•˜ëŠ” ê¸°ë²•

- `dispatch` í•¨ìˆ˜ì™€ `logging` í•¨ìˆ˜ë¥¼ í•©ì¹˜ê¸° ìœ„í•œ `ëª½í‚¤íŒ¨ì¹­` ê¸°ë²•

```javascript
let next = store.dispatch;

// ì™¸ë¶€ì—ì„œ í˜¸ì¶œë˜ëŠ” dispatch ëŠ” ì´ì œ ë°”ë€Œì—ˆë‹¤.
store.dispatch = function dispatchAndLog(action) {
  console.log("dispatching", action);
  let result = next(action); // ì›ë˜ì˜ dispatch í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
  console.log("next state", store.getState());
  return result;
};
```

## Curring

í”„ë¡œê·¸ë˜ë°ì—ì„œ í•¨ìˆ˜ì™€ í•¨ìˆ˜ ì‚¬ì´ì˜ ì—¬ì§€ë¥¼ ë‘ì–´ í•¨ìˆ˜ ì‚¬ìš©ìë¡œ í•˜ì—¬ê¸ˆ ì›í•˜ëŠ” ì¡°ì‘í•  ìˆ˜ ìˆëŠ” ì—¬ì§€ë¥¼ ë§Œë“œëŠ” ê¸°ë²•ì´ë‹¤. (JS **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°**ì—ì„œ ì£¼ë¡œ ì‚¬ìš©ë¨)

```javascript
const add1 = function (a, b) {
  return a + b;
};
add1(10, 20);
// a ì™€ b ê°€ ë”í•´ì§€ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©ìê°€ ê°œì…í•  ì—¬ì§€ê°€ ì—†ë‹¤.

const add2 = function (a) {
  return function (b) {
    return a + b;
  };
};
add2(10)(20);
// a ì™€ b ê°€ ë”í•´ì§€ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©ìê°€ ê°œì…í•  ì—¬ì§€ê°€ ìˆë‹¤.
// ì˜ˆ)
const add10To = add2(10);
add10To(20);

// ì´ë ‡ê²Œ ì›ë˜ì˜ í•¨ìˆ˜ë¥¼ ë‹´ì•„ ëª½í‚¤íŒ¨ì¹­ íŒ¨í„´ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.
```

- `Mddleware` ì— `curring` ê¸°ë²•ì´ ì‚¬ìš©ë˜ëŠ” ì´ìœ 

`Middleware` í•¨ìˆ˜ì˜ ì‚¬ìš©ìì¸ `Redux` ê°€ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì¡°ì‘í•´ ë‹¤ì–‘í•œ `Middleware` ë“¤ê³¼ ì¡°í•©í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ `curring` ê¸°ë²•ì´ ì‚¬ìš©ëœë‹¤.

## Reference Link

[Redux ê³µì‹ ë¬¸ì„œì˜ Middleware í¸ ì°¸ê³ ](https://dobbit.github.io/redux/advanced/Middleware.html#%EB%AC%B8%EC%A0%9C-%EB%A1%9C%EA%B9%85)
