## ìš°ì•„í•œ í…Œí¬ëŸ¬ë‹ React&Typescript 7íšŒì°¨

2020ë…„ 09ì›” 22ì¼ í™”ìš”ì¼

<details><summary>ğŸ“– Table of Contents</summary>

- [Promise](#Promise)

  - [Promise ì— ëŒ€í•œ í”í•œ ì˜¤í•´](#Promise-ì—-ëŒ€í•œ-í”í•œ-ì˜¤í•´)

  - [ì‚¬ë¡€ë¥¼ í†µí•´ ì´í•´í•˜ê¸°](#ì‚¬ë¡€ë¥¼-í†µí•´-ì´í•´í•˜ê¸°)

- [TypeScript](#TypeScript)

  - [Type Alias vs interface](#Type-Alias-vs-interface)

  - [Run Time vs Compile Time](#Run-Time-vs-Compile-Time)

  - [Generic](#Generic)

- [React](#React)

  - [React ì˜ ì»´í¬ë„ŒíŠ¸ ë¶„í• ](#React-ì˜-ì»´í¬ë„ŒíŠ¸-ë¶„í• )

  - [ì‹¤ì œ App ë³´ê¸°](#ì‹¤ì œ-App-ë³´ê¸°)

- [Reference Link](#Reference-Link)

</details>

## ì˜¤ëŠ˜ì˜ ì£¼ì œ

- Promise ì˜ ê°œë…ì„ í•œë²ˆ ë” ì •ë¦¬í•´ë³´ì

- TypeScript ì˜ ê°œë… ì •ë¦¬

- React ì‹¤ì œ App ë§Œë“¤ê¸°

## Promise

í˜„ì¬ `JavaScript` `Promise` ëŠ” Frontend ê³„ì˜ Backend ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. `Web Assembly` ë“± ë‹¤ì–‘í•œ ê¸°ìˆ ì´ `Promise` ë¼ëŠ” ì¸í”„ë¼ë¡œ êµ¬ì¶•ë˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.

### Promise ì— ëŒ€í•œ í”í•œ ì˜¤í•´

`Promise` ì— ëŒ€í•´ ë§ì´ë“¤ ì˜¤í•´í•˜ëŠ” ë¶€ë¶„ì´ ë°”ë¡œ **í•¨ìˆ˜ì˜ ê°œë…ìœ¼ë¡œ `Promise` ë¥¼ ì´í•´í•˜ë ¤ëŠ” ê²ƒ**ì´ë‹¤.

`Promise` ëŠ” ì¼ì¢…ì˜ `ìƒíƒœë¨¸ì‹  (state machine)` ì´ë‹¤.

- ìƒì„±ëœ **ì¦‰ì‹œ ì‹¤í–‰** ë˜ê³ 
- `resolve()` ë‚˜ `reject()` ì— ë”°ë¼ **ìƒíƒœ (PromiseState)** ì™€ **ê²°ê³¼ (PromiseResult)** ê°€ ë°”ë€” ë¿ì´ë‹¤.

**í•¨ìˆ˜ì™€ëŠ” ë‹¬ë¦¬** í˜¸ì¶œìì— ì˜í•´ `í˜¸ì¶œë˜ê±°ë‚˜`, ì–´ë–¤ ê°’ì„ `return` í•˜ê±°ë‚˜ `ì¢…ë£Œ`ë˜ì§€ ì•ŠëŠ”ë‹¤.

#### ê·¸ë ‡ë‹¤ë©´,

`then()` ì€ `Promise` ë¥¼ ë§ˆì¹˜ **í•¨ìˆ˜**ì²˜ëŸ¼ `í˜¸ì¶œ`í•˜ê³  `ì¢…ë£Œ`ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦° í›„ `return` ëœ ê°’ì„ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” ë©”ì†Œë“œê°€ ì•„ë‹Œê°€?

_ê·¸ë ‡ì§€ ì•Šë‹¤._

- ìœ„ì—ì„œ ì–¸ê¸‰í•œëŒ€ë¡œ `Promise` ëŠ” **ìƒì„± ì¦‰ì‹œ ì‹¤í–‰**ëœë‹¤. `í˜¸ì¶œ`ì´ë€ ê°œë…ì€ ì—†ë‹¤.
- `then()` ì€ `Promise` ì˜ ìƒíƒœê°€ `fulfilled` ê°€ ë˜ë©´ ì¦‰ì‹œ ì‹¤í–‰ë˜ëŠ” ë©”ì†Œë“œì¼ ë¿ì´ë‹¤.  
  ì¦‰, `Promise` ì˜ `ì¢…ë£Œ`ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ê°œë…ì´ ì•„ë‹ˆë¼ **ìƒíƒœë¥¼ ê°ì§€**í•˜ëŠ” ê²ƒì¼ ë¿ì´ë‹¤.

### ì‚¬ë¡€ë¥¼ í†µí•´ ì´í•´í•˜ê¸°

ìœ„ì—ì„œ ì–¸ê¸‰í•œ `ì˜¤í•´`ë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹¤ìˆ˜ë¥¼ ì½”ë“œë¥¼ í†µí•´ ì‚´í´ë³´ì

- code

```javascript
const p1 = new Promise((resolve) => {
  setTimeout(() => {
    console.log("@4ì´ˆ ì™„ë£Œ");
    resolve("4ì´ˆ ì‘ì—… ì™„ë£Œ");
  }, 4000);
});

const p2 = new Promise((resolve) => {
  setTimeout(() => {
    console.log("@2ì´ˆ ì™„ë£Œ");
    resolve("2ì´ˆ ì‘ì—… ì™„ë£Œ");
  }, 2000);
});

// ë³€ìˆ˜ `p1` ê³¼ `p2` ì— ë‹´ê¸´ Promise ëŠ” ìƒì„±ëœ ì¦‰ì‹œ ì‹¤í–‰ëœë‹¤.
// ì¦‰, ì—¬ê¸°ì„  ì´ë¯¸ ì‹¤í–‰ ì¤‘ì´ë‹¤.
// ("@" ë¶™ì€ log ë¥¼ í†µí•´ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤)

p1.then((result) => {
  // ìœ„ì—ì„œ ì‹¤í–‰ëœ `p1` Promise ì˜ ìƒíƒœê°€ fulfilled ë˜ë©´ ì‹¤í–‰ëœë‹¤.
  console.log(result);
  return p2;
}).then((result) => {
  // p2 ëŠ” ì´ë¯¸ fufilled ë˜ì–´ ìˆìœ¼ë¯€ë¡œ (2ì´ˆ ë°–ì— ì•ˆê±¸ë¦¼)
  // ë‘ë²ˆì§¸ `then()` ì€ ì§€ì—° ì—†ì´ ë°”ë¡œ ì‹¤í–‰ëœë‹¤.
  console.log(result);
});
```

- log

```
----- (2ì´ˆ í›„) ---  (__ë¡œê·¸ ì•„ë‹˜ - ì§€ì—° ì‹œê°„ mark)
@2ì´ˆ ì™„ë£Œ
----- (2ì´ˆ í›„) ---
@4ì´ˆ ì™„ë£Œ
4ì´ˆ ì‘ì—… ì™„ë£Œ
2ì´ˆ ì‘ì—… ì™„ë£Œ
```

ì½”ë“œ ì‘ì„±ìê°€ ì›í–ˆë˜ ë™ì‘ì€ ì•„ë˜ì™€ ê°™ì„ ê²ƒì´ë‹¤.

```
----- (4ì´ˆ í›„) ---
@4ì´ˆ ì™„ë£Œ
4ì´ˆ ì‘ì—… ì™„ë£Œ
----- (2ì´ˆ í›„) ---
@2ì´ˆ ì™„ë£Œ
2ì´ˆ ì‘ì—… ì™„ë£Œ
```

ìƒì„¸í•œ ë¬¸ì œì ì€ ì½”ë“œì— ì£¼ì„ìœ¼ë¡œ ê¸°ë¡í•´ ë‘ì—ˆë‹¤.

ìœ„ ì½”ë“œì˜ **í•µì‹¬ì ì¸ ë¬¸ì œì **ì€ `Promise` ì˜ **ì‹œì‘**ê³¼ **ìƒíƒœ ì½ê¸°** ì˜ ìˆœê°„ì´ **ë¶„ë¦¬**ë˜ì–´ ìˆì–´ í˜¼ë€ì„ ì•¼ê¸°í•œë‹¤ëŠ” ì ì´ë‹¤.

ì¦‰, **`Promise` ê°€ ìƒì„±ë˜ëŠ” ìˆœê°„**ê³¼ **`then()`ìœ¼ë¡œ ìƒíƒœë¥¼ ì½ëŠ”** ìˆœê°„ì´ ë¶„ë¦¬ë˜ì–´ ìˆì–´ ì›í•˜ëŠ” ëŒ€ë¡œ `Promise` ë¥¼ ì‚¬ìš©í•˜ê¸° ì‰½ì§€ ì•Šë‹¤.

ì•„ë˜ì™€ ê°™ì´ ê°œì„ í•  ìˆ˜ ìˆê² ë‹¤.

```javascript
const p1 = () =>
  new Promise((resolve) => {
    setTimeout(() => {
      console.log("@4ì´ˆ ì™„ë£Œ");
      resolve("4ì´ˆ ì‘ì—… ì™„ë£Œ");
    }, 4000);
  });

const p2 = () =>
  new Promise((resolve) => {
    setTimeout(() => {
      console.log("@2ì´ˆ ì™„ë£Œ");
      resolve("2ì´ˆ ì‘ì—… ì™„ë£Œ");
    }, 2000);
  });

// Promise ë¥¼ return í•˜ëŠ” í•¨ìˆ˜ `p1`, `p2` ë¥¼ í˜¸ì¶œí•´ì•¼ì§€ë§Œ Promise ê°€ ìƒì„±ëœë‹¤.

p1()
  .then((result) => {
    // p1() ì´ í˜¸ì¶œë˜ë©° Promise ê°€ ìƒì„±ë˜ê³  ì‹œì‘ëœë‹¤.
    console.log(result);
    return p2();
  })
  .then((result) => {
    // ë§ˆì°¬ê°€ì§€ë¡œ p2() ê°€ í˜¸ì¶œë˜ë©´ì„œ Promise ê°€ ìƒì„±, ì‹œì‘ëœë‹¤.
    console.log(result);
  });

// @4ì´ˆ ì™„ë£Œ
// 4ì´ˆ ì‘ì—… ì™„ë£Œ
// @2ì´ˆ ì™„ë£Œ
// 2ì´ˆ ì‘ì—… ì™„ë£Œ
```

`Promise` ë¥¼ í•¨ìˆ˜ì— `return` ì‹œì¼œì£¼ì–´ `Promise` ì˜ **ì‹œì‘**ê³¼ **ìƒíƒœ ì½ê¸°** ì˜ ìˆœê°„ì„ í†µì¼ì‹œì¼œ ë¬¸ì œë¥¼ í•´ê²°í–ˆë‹¤.

## Typescript

`React`ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ë©´ì„œ `Typescript`ì˜ ìŠ¤í™ì„ ì‚¬ìš©í•˜ëŠ” ì¼ì´ ë§ì§€ì•Šë‹¤.  
ì•„ë˜ì™€ ê°™ì´ ì»´í¬ë„ŒíŠ¸ì˜ **`props`ì˜ íƒ€ì…ì„ ì‘ì„±í•œ í›„ íƒ€ì…ì„ ì§€ì •**í•˜ëŠ” ê¸°ëŠ¥ì„ ê°€ì¥ ë§ì´ ì‚¬ìš©í•œë‹¤.

```typescript
export interface OrderStatusProps {
  showTimeline: boolean;
  success: number;
  failure: number;
  successTimeline: ITimelineItem[];
  failureTimeline: ITimelineItem[];
}
// export ëŠ” ì™¸ë¶€ì—ì„œ ë™ì¼í•œ type ì‚¬ìš©í•˜ê¸° ìœ„í•´

class OrderStatus extends React.Component<OrderStatusProps> {
  // ... ìƒëµ
}
```

### Type Alias vs interface

`React` ì—ì„œ ì»´í¬ë„ŒíŠ¸ `props` ì˜ íƒ€ì…ì„ ì§€ì •í•  ë•Œ `type`ì„ ì´ìš©í•œ `Type Alias (íƒ€ì… ë³„ì¹­)` ë‚˜ `interface`ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.  
`ë‘˜ ì¤‘ ì–´ëŠ ê²ƒì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ê°€?`ì— ëŒ€í•œ ë…¼ìŸì´ ì¢…ì¢… ìˆë‹¤.

```typescript
type Person = {
  name: string;
  age: number;
  job?: [];
};

interface Human {
  name: string;
  age: number;
  job?: [];
}
```

- `type alias`

`type alias` ì€ ì•„ë˜ì˜ ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ì§€ì›í•œë‹¤.

```typescript
type box = number | string;
let b: box = 1;
b = "box";
```

`interface`ëŠ” ìœ ë‹ˆì˜¨ íƒ€ì…ì„ ì§€ì›í•˜ì§€ ì•Šì§€ë§Œ `ìƒì† (extends)`ì„ ì§€ì›í•œë‹¤.

```typescript
interface Cat extends Animal {
  // ...
}
```

ì´ ë‘ íŠ¹ì§•ì„ ì œì™¸í•˜ê³  ëŒ€ë¶€ë¶„ì˜ ê¸°ëŠ¥ì€ ë¹„ìŠ·í•˜ë©° App ì—ì„œ í†µì¼ì„± ìˆê²Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### Run Time vs Compile Time

- `type alias` ì™€ `interface`ë¥¼ íŠ¸ëœìŠ¤íŒŒì¼í•œ ê²°ê³¼ [(ë§í¬)](https://www.typescriptlang.org/play?#code/C4TwDgpgBAChBOBnA9gOygXigbwFBSlQEMBbCALikWHgEtUBzAGnyiIYsIFcSAjBFgQBWyXgH5KAbQC6LAL4BuXLnrAEAMyIBjaAAkeRdHgLEylanUZKC7Tqh7941qCPFTpSuUA)

```javascript
"user strict";

// íƒ€ì… ê´€ë ¨ ë‚´ìš©ì˜ ì½”ë“œëŠ” ìƒì„±ë˜ì§€ ì•ŠëŠ”ë‹¤.

```

`type alias`ì´ë‚˜ `interface`ë¥¼ `Javascript`ë¡œ íŠ¸ëœìŠ¤íŒŒì¼ í•˜ê²Œë˜ë©´ ì•„ë¬´ëŸ° ì½”ë“œê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.

ì¦‰, ë‘˜ ë‹¤ **ì»´íŒŒì¼ íƒ€ì„**ì— ì ìš©ë˜ëŠ” ë¬¸ë²•ì´ë‹¤.

```typescript
const p: Person = JSON.parse(prompt("ê°ì²´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”"));
```

ìœ„ì˜ ì½”ë“œëŠ” ì‚¬ìš©ìê°€ ì–´ë– í•œ ì…ë ¥ì„ í• ì§€ ì˜ˆì¸¡í•  ìˆ˜ ì—†ë‹¤.  
ëŸ°íƒ€ì„ì—ì„œ ì‚¬ìš©ìì˜ ì…ë ¥ì— ë”°ë¼ ì˜¤ë¥˜ê°€ ë°œìƒí•´ ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì˜¤ë¥˜ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤.

> (tip) ì•Œì•„ë‘˜ í‚¤ì›Œë“œ
>
> - parsing vs validating
> - type predicate

### Generic

**Generic (ì œë„¤ë¦­)** ì€ ë™ì ìœ¼ë¡œ íƒ€ì…ì„ ì§€ì •í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

```typescript
function identity<T>(arg: T): T {
  return arg;
}
```

ìœ„ì˜ `identity` í•¨ìˆ˜ëŠ” `T` íƒ€ì…ì¸ ê°’ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ `T` íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.

```typescript
let stringOutput = identity<string>("ë¬¸ìì—´");
let numberOutput = identity<number>(1112);

console.log(stringOutput); // ë¬¸ìì—´
console.log(numberOutput); // 1112
```

Typescript ì˜ `Generic`ì€ `type alias` ì™€ `interface` ì™€ ë™ì¼í•˜ê²Œ **Compile Time**ì— ë™ì‘í•˜ëŠ” ì½”ë“œë‹¤.  
React ì»´í¬ë„ŒíŠ¸ì˜ `Generic`ì€ ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

```typescript
React.Component<P, S, SS>
```

`P`ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ `props`, `S`ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ `state`, `SS`ëŠ” `snapshot`ì„ ì˜ë¯¸í•œë‹¤.

## React

### React ì˜ ì»´í¬ë„ŒíŠ¸ ë¶„í• 

ì»´í¬ë„ŒíŠ¸ ë³„ë¡œ **ê´€ì‹¬ì‚¬**ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ„ë˜  
**ì•±ì˜ ê·œëª¨ (ë³¼ë¥¨) ì— ë”°ë¼** ì í•©í•œ ì•„í‚¤í…ì³ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤.

_ì•„í‚¤í…ì³ì—ë§Œ ë„ˆë¬´ ë§¤ëª°ë˜ì§€ ë§ì._

- ì»´í¬ë„ŒíŠ¸ì˜ ì´ë¦„ì€ ê¸¸ì–´ë„ ìì‹ ì´ í•˜ëŠ” **ì—­í• ì„ ì´ë¦„ì— ì˜ ë‹´ëŠ” ê²ƒì´ ì¤‘ìš”**í•˜ë‹¤.

- ì•±ì˜ ê·œëª¨ê°€ í´ ê²½ìš° ì•„ë˜ì²˜ëŸ¼ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤. (ê°•ì‚¬ë‹˜ ì¶”ì²œ)  
  (`pages` > `flows` > `containers` > `components`)  
  \*\* ê° ì»´í¬ë„ŒíŠ¸ëª…ê³¼ íŒŒì¼ëª…ì— ì—­í• ì„ ê¸°ì…í•´ì£¼ë©´ ê°€ë…ì„±ì— í° ë„ì›€ëœë‹¤. (ì´ë¦„ì´ ê¸¸ì–´ì§€ë”ë¼ë„..)

- `containers` ì»´í¬ë„ŒíŠ¸ë€?

  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹¤ë£¨ëŠ” ì»´í¬ë„ŒíŠ¸
  - í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ê²°í•©ì‹œí‚¤ëŠ” ì»´í¬ë„ŒíŠ¸
  - ui ìš”ì†Œë¥¼ ë°°ì œí•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. (`jsx` ëŠ” ì»´í¬ë„ŒíŠ¸ ê²°í•©ê³¼ ë°ì´í„° ë¿Œë¦¬ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©)
  - ë‹¨! , App ì˜ ì„±ê²©ì— ë”°ë¼ UI ì  Wrapper ì»´í¬ë„ŒíŠ¸ë¥¼ container ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ë‹¤.

- `Higher Order Component` ì»´í¬ë„ŒíŠ¸ë€?  
  í•¨ìˆ˜ë¥¼ ë°›ì•„ í•¨ìˆ˜ë¥¼ return í•˜ëŠ” ì»´í¬ë„ŒíŠ¸

  (ì˜ˆ : `react-redux` ì˜ `connect` í•¨ìˆ˜)

  - `connect` í•¨ìˆ˜ëŠ” ë³µì¡ì„±ì´ ë†’ë‹¤ëŠ” ì´ìœ ë¡œ `Redux` ì˜ ì•½ì ì´ê¸°ë„ í–ˆë‹¤.  
    í•˜ì§€ë§Œ, Custom Hook ì¸ `useSelector` , `useDispatch` ë“±ì´ release ë˜ë©´ì„œ ë³µì¡ì„±ì„ í•´ì†Œí–ˆë‹¤.

### ì‹¤ì œ App ë³´ê¸°

- [ê°•ì‚¬ë‹˜ ì½”ë“œ](https://codesandbox.io/s/ordermonitor08-gangsanim-tjkpv)

- [ë‚˜ì˜ ì½”ë“œ](#)

- ì¤‘ìš” ì½”ë“œ

  - Maybe ì»´í¬ë„ŒíŠ¸ (ê°•ì‚¬ë‹˜ì˜ ì¶”ì²œ íŒ¨í„´ [> ë§í¬](https://codesandbox.io/s/ordermonitor08-gangsanim-tjkpv?file=/src/components/Maybe.tsx))

    ì•„ë˜ì™€ ê°™ì€ `jsx` ë‚´ì˜ `javascript` ë¡œì§ì„ ì œê±°í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” dummy ì»´í¬ë„ŒíŠ¸

    ```
    { isVisible && <Component /> }
    ```

###

## Reference Link

- [blueprint - React + OOP ì°¸ê³ ]()
